{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/methods/addLayerIfPresent.js","webpack://exports/./src/methods/buildColumnGroup.js","webpack://exports/./src/methods/buildPaletteBoard.js","webpack://exports/./src/methods/buildPaletteCell.js","webpack://exports/./src/methods/buildSectionGroup.js","webpack://exports/./src/methods/getSharedBorderStyles.js","webpack://exports/./src/methods/getSharedFillStyles.js","webpack://exports/./src/methods/parseLayers.js","webpack://exports/./src/methods/processLayerColors.js","webpack://exports/./src/setupPalette.js","webpack://exports/./src/utils/arrayMatches.js","webpack://exports/./src/utils/constants.js","webpack://exports/external \"sketch\""],"names":["addLayerIfPresent","layer","group","layers","push","buildColumnGroup","name","frame","headerText","subText","sketch","Group","Rectangle","type","Types","Text","text","style","fontSize","fontWeight","fontFamily","borders","fixedWidth","Artboard","buildPaletteBoard","document","sharedFills","layerFills","sharedBorders","layerBorders","artboards","pages","map","page","flat","paletteBoard","filter","ab","PALETTE_NAME","boardFrame","flowStartPoint","coordinates","x","y","sharedSubtext","sharedStylesGroup","sLFCGroup","buildSectionGroup","sLBCGroup","uniqueSubtext","uniqueStylesGroup","sharedStylesY","lFGroup","lBGroup","height","Math","max","unshift","buildCellText","color","usages","thicknesses","localCoordinates","thicknessPrefix","join","opacity","parseInt","substring","opacitySuffix","toFixed","usagesString","buildPaletteCell","sharedKeys","colorLayers","colorArr","colorFills","colorBorders","includes","whiteBg","ShapePath","shapeType","ShapeType","fills","colorShape","Oval","borderOptions","startArrowHead","endArrowHead","cellHeight","BASE_CELL_HEIGHT","Array","isArray","forEach","key","charLimit","yAdjustment","ceil","length","textLayers","colorGroup","label","colorDict","colors","Object","entries","thickness","getSharedBorderStyles","sharedLayerStyles","reduce","acc","getSharedFillStyles","parseLayers","colorPathDictionary","pageIndex","abIndex","layerIndeces","layerLoop","layerIndex","fill","fillIndex","additionalLayerPath","index","path","border","borderIndex","storedIndeces","processLayerColors","sharedColors","layerColors","arrayMatches","thicknessMatches","matches","newItems","Document","Settings","message","UI","setupPalette","getSelectedDocument","setDocumentSettingForKey","arr1","arr2","strict","item"],"mappings":"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","file":"__setupPalette.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/setupPalette.js\");\n","export default function addLayerIfPresent(layer, group) {\n    if (layer) {\n        group.layers.push(layer);\n    }\n}\n","import sketch from 'sketch';\n\nexport default function buildColumnGroup(name, frame, headerText, subText) {\n    return new sketch.Group({\n        name,\n        frame: new sketch.Rectangle(...frame),\n        layers: [\n            {\n                type: sketch.Types.Text,\n                text: headerText,\n                style: {\n                    fontSize: 48,\n                    fontWeight: 9,\n                    fontFamily: 'PT Sans',\n                    borders: [],\n                },\n            },\n            {\n                type: sketch.Types.Text,\n                text: subText,\n                style: {\n                    fontSize: 14,\n                    fontFamily: 'PT Sans',\n                    borders: [],\n                },\n                frame: new sketch.Rectangle(0, 60, 350, 20),\n                fixedWidth: true,\n            },\n        ],\n    });\n}\n","import sketch from 'sketch';\nimport buildSectionGroup from './buildSectionGroup';\nimport addLayerIfPresent from './addLayerIfPresent';\nimport buildColumnGroup from './buildColumnGroup';\nimport { PALETTE_NAME } from '../utils/constants';\n\nconst { Rectangle, Artboard } = sketch;\n\nexport default function buildPaletteBoard(document, sharedFills, layerFills, sharedBorders, layerBorders) {\n    const artboards = document.pages.map((page) => page.layers).flat();\n\n    let paletteBoard = artboards.filter((ab) => ab.name === PALETTE_NAME)[0];\n\n    if (!paletteBoard) {\n        const boardFrame = new Rectangle(-4000, 0, 1000, 2000);\n        paletteBoard = new Artboard({\n            name: PALETTE_NAME,\n            flowStartPoint: true,\n            frame: boardFrame,\n        });\n    }\n\n    let coordinates = {\n        x: 0,\n        y: 150,\n    };\n\n    const sharedSubtext =\n        '[Some encouragement about using shared styles and how they are semantic, reusable, and can be updated in a single place.] ';\n\n    const sharedStylesGroup = buildColumnGroup(\n        'shared-palette-styles',\n        [75, 75, 400, coordinates.y],\n        'Shared Styles',\n        sharedSubtext\n    );\n\n    const sLFCGroup = buildSectionGroup(coordinates, 'shared_layer_fills', 'Fills', sharedFills);\n\n    const sLBCGroup = buildSectionGroup(coordinates, 'shared_layer_borders', 'Borders', sharedBorders, 'border');\n\n    addLayerIfPresent(sLFCGroup, sharedStylesGroup);\n    addLayerIfPresent(sLBCGroup, sharedStylesGroup);\n\n    const uniqueSubtext =\n        '[Some admonishment about using one-off styles since they lack semantic content and have to be adjusted one-by-one, which is a nightmare.]';\n\n    const uniqueStylesGroup = buildColumnGroup(\n        'unique-palette-styles',\n        [550, 75, 350, coordinates.y],\n        'Unique Styles',\n        uniqueSubtext\n    );\n\n    const sharedStylesY = coordinates.y;\n    coordinates.y = 150;\n\n    const lFGroup = buildSectionGroup(coordinates, 'layer_fills', 'Fills', layerFills);\n\n    const lBGroup = buildSectionGroup(coordinates, 'layer_borders', 'Borders', layerBorders, 'border');\n\n    addLayerIfPresent(lFGroup, uniqueStylesGroup);\n    addLayerIfPresent(lBGroup, uniqueStylesGroup);\n\n    paletteBoard.layers = [sharedStylesGroup, uniqueStylesGroup].filter((group) => !!group);\n\n    paletteBoard.frame.height = Math.max(sharedStylesY, coordinates.y) + 100;\n\n    document.pages[0].layers.unshift(paletteBoard);\n}\n","import sketch from 'sketch';\nimport { BASE_CELL_HEIGHT } from '../utils/constants';\n\nexport function buildCellText(color, usages, thicknesses, localCoordinates) {\n    const thicknessPrefix = thicknesses ? `${thicknesses.join('px, ')}px ` : '';\n    const opacity = parseInt(color.substring(7, 9), 16) / 255;\n    const opacitySuffix = opacity < 1 ? ` (${opacity.toFixed(2).substring(1)} opacity)` : '';\n    const usagesString = `${usages} use${usages !== 1 ? 's' : ''}`;\n\n    return [\n        {\n            type: sketch.Types.Text,\n            text: `${thicknessPrefix}${color.substring(0, 7)}${opacitySuffix}`,\n            frame: new sketch.Rectangle(90, localCoordinates.y, 300, 20),\n            style: {\n                fontSize: 17,\n                fontFamily: 'PT Sans',\n                borders: [],\n            },\n        },\n        {\n            type: sketch.Types.Text,\n            text: usagesString,\n            frame: new sketch.Rectangle(90, localCoordinates.y + 20, 300, 20),\n            style: {\n                fontSize: 17,\n                fontFamily: 'PT Sans',\n                borders: [],\n            },\n        },\n    ]; // currently need to be last layers in group\n}\n\nexport default function buildPaletteCell([color, { sharedKeys, usages, thicknesses }], type, coordinates) {\n    let colorLayers = [];\n    const colorArr = [{ color }];\n    let colorFills = [];\n    let colorBorders = [];\n    if (type === 'border') {\n        colorBorders = colorArr;\n    } else {\n        colorFills = colorArr;\n    }\n\n    if (color.includes('#ffffff')) {\n        let whiteBg = {\n            type: sketch.Types.ShapePath,\n            shapeType: sketch.ShapePath.ShapeType.Rectangle,\n            style: {\n                fills: [\n                    {\n                        color: '#000000',\n                    },\n                ],\n                borders: [],\n            },\n            frame: new sketch.Rectangle(0, 0, 80, 80),\n        };\n        colorLayers.push(whiteBg);\n    }\n    let localCoordinates = {\n        x: 10,\n        y: 10,\n    };\n\n    const colorShape = {\n        type: sketch.Types.ShapePath,\n        shapeType: sketch.ShapePath.ShapeType.Oval,\n        style: {\n            fills: colorFills,\n            borders: colorBorders,\n            borderOptions: {\n                startArrowHead: 'FilledCircle',\n                endArrowHead: 'FilledCircle',\n            },\n        },\n        frame: new sketch.Rectangle(localCoordinates.x, localCoordinates.y, 60, 60),\n    };\n    colorLayers.push(colorShape);\n\n    let cellHeight = BASE_CELL_HEIGHT;\n\n    if (Array.isArray(sharedKeys)) {\n        sharedKeys.forEach((key) => {\n            colorLayers.push({\n                type: sketch.Types.Text,\n                text: key,\n                style: {\n                    fontSize: 17,\n                    fontWeight: 12,\n                    fontFamily: 'PT Sans',\n                    borders: [],\n                },\n                frame: new sketch.Rectangle(90, localCoordinates.y, 270, 20),\n                fixedWidth: true,\n            });\n\n            const charLimit = 33; // May need adjustments\n            const yAdjustment = Math.ceil(key.length / charLimit) * 20;\n            localCoordinates.y += yAdjustment;\n            cellHeight += yAdjustment;\n        });\n    }\n\n    localCoordinates.y += 10;\n\n    const textLayers = buildCellText(color, usages, thicknesses, localCoordinates);\n    colorLayers.push(...textLayers);\n\n    const colorGroup = new sketch.Group({\n        name: `${type}: ${color}`,\n        layers: colorLayers,\n    });\n    colorGroup.frame.y = coordinates.y;\n\n    coordinates.y += cellHeight;\n    return colorGroup;\n}\n","import sketch from 'sketch';\nimport buildPaletteCell from './buildPaletteCell';\n\nexport default function buildSectionGroup(coordinates, name, label, colorDict, type = 'fill') {\n    const colors = Object.entries(colorDict);\n    if (colors.length === 0) return;\n\n    let layers = [\n        {\n            type: sketch.Types.Text,\n            text: label,\n            style: {\n                fontSize: 30,\n                fontWeight: 12,\n                fontFamily: 'PT Sans',\n                borders: [],\n            },\n            frame: new sketch.Rectangle(0, coordinates.y, 300, 70),\n        },\n        {\n            type: sketch.Types.ShapePath,\n            shapeType: sketch.ShapePath.ShapeType.Rectangle,\n            style: {\n                fills: [],\n                borders: [\n                    {\n                        color: '#bcbcbc',\n                        thickness: 1,\n                    },\n                ],\n            },\n            frame: new sketch.Rectangle(0, coordinates.y + 40, 350, 1),\n        },\n    ];\n\n    coordinates.y += 52;\n\n    colors.forEach((color) => {\n        layers.push(buildPaletteCell(color, type, coordinates));\n    });\n\n    const group = new sketch.Group({ name, layers });\n    coordinates.y += 30;\n    return group;\n}\n","export default function getSharedBorderStyles(document) {\n    return document.sharedLayerStyles.reduce((acc, { name, style: { borders } }) => {\n        borders.forEach(({ color, thickness }) => {\n            if (acc[color]) {\n                acc[color].sharedKeys.push(name);\n\n                if (!acc[color].thicknesses.includes(thickness)) {\n                    acc[color].thicknesses.push(thickness);\n                }\n                return;\n            }\n\n            acc[color] = {\n                sharedKeys: [name],\n                thicknesses: [thickness],\n                usages: 0,\n            };\n        });\n        return acc;\n    }, {});\n}\n","export default function getSharedFillStyles(document) {\n    return document.sharedLayerStyles.reduce((acc, { name, style: { fills } }) => {\n        fills.forEach(({ color }) => {\n            if (acc[color]) {\n                acc[color].sharedKeys.push(name);\n                return;\n            }\n\n            acc[color] = {\n                sharedKeys: [name],\n                usages: 0,\n            };\n        });\n\n        return acc;\n    }, {});\n}\n","export default function parseLayers(document, PALETTE_NAME) {\n    let layerFills = {};\n    let layerBorders = {};\n    const colorPathDictionary = document.pages.reduce((acc, page, pageIndex) => {\n        page.layers\n            .filter((ab) => ab.name !== PALETTE_NAME)\n            .forEach((ab, abIndex) => {\n                let layerIndeces = [];\n                function layerLoop(layer, layerIndex) {\n                    if (!layer || !layer.style) {\n                        return;\n                    }\n\n                    layer.style.fills.forEach((fill, fillIndex) => {\n                        const { color } = fill;\n                        if (color) {\n                            const additionalLayerPath = layerIndeces.reduce(\n                                (acc, index) => `${acc}.layers[${index}]`,\n                                ''\n                            );\n                            const path = `pages[${pageIndex}].layers[${\n                                abIndex + 1\n                            }]${additionalLayerPath}.layers[${layerIndex}].style.fills[${fillIndex}].color`;\n                            acc[path] = color;\n\n                            if (layerFills[color]) {\n                                layerFills[color].usages++;\n                                return;\n                            }\n                            layerFills[color] = {\n                                usages: 1,\n                            };\n                        }\n                    });\n\n                    layer.style.borders.forEach((border, borderIndex) => {\n                        const { color, thickness } = border;\n                        if (color) {\n                            const additionalLayerPath = layerIndeces.reduce(\n                                (acc, index) => `${acc}.layers[${index}]`,\n                                ''\n                            );\n                            const path = `pages[${pageIndex}].layers[${\n                                abIndex + 1\n                            }]${additionalLayerPath}.layers[${layerIndex}].style.borders[${borderIndex}].color`;\n                            acc[path] = color;\n\n                            if (layerBorders[color]) {\n                                if (!layerBorders[color].thicknesses.includes(thickness)) {\n                                    layerBorders[color].thicknesses.push(thickness);\n                                }\n                                layerBorders[color].usages++;\n                                return;\n                            }\n                            layerBorders[color] = {\n                                usages: 1,\n                                thicknesses: [thickness],\n                            };\n                        }\n                    });\n\n                    if (Array.isArray(layer.layers)) {\n                        const storedIndeces = [...layerIndeces];\n                        layerIndeces.push(layerIndex);\n                        layer.layers.forEach(layerLoop);\n                        layerIndeces = storedIndeces;\n                    }\n                }\n\n                Array.isArray(ab.layers) && ab.layers.forEach(layerLoop);\n            });\n\n        return acc;\n    }, {});\n\n    return {\n        colorPathDictionary,\n        layerBorders,\n        layerFills,\n    };\n}\n","import arrayMatches from '../utils/arrayMatches';\n\nexport default function processLayerColors(sharedColors, layerColors) {\n    Object.entries(layerColors).forEach(([color, { usages, thicknesses }]) => {\n        if (sharedColors[color]) {\n            const { matches: thicknessMatches, newItems } = arrayMatches(sharedColors[color].thicknesses, thicknesses);\n\n            if (thicknessMatches) {\n                sharedColors[color].usages = usages;\n                delete layerColors[color];\n            } else {\n                layerColors[color].thicknesses = newItems;\n            }\n        }\n    });\n}\n","import sketch from 'sketch';\nimport getSharedFillStyles from './methods/getSharedFillStyles';\nimport getSharedBorderStyles from './methods/getSharedBorderStyles';\nimport parseLayers from './methods/parseLayers';\nimport processLayerColors from './methods/processLayerColors';\nimport { PALETTE_NAME } from './utils/constants';\nimport buildPaletteBoard from './methods/buildPaletteBoard';\n\nconst {\n    Document,\n    Settings,\n    UI: { message },\n} = sketch;\n\nexport default function setupPalette() {\n    message('Building Color Pallete Document');\n\n    const document = Document.getSelectedDocument();\n\n    let sharedFills = getSharedFillStyles(document);\n    let sharedBorders = getSharedBorderStyles(document);\n\n    let { colorPathDictionary, layerFills, layerBorders } = parseLayers(document, PALETTE_NAME);\n\n    processLayerColors(sharedFills, layerFills);\n    processLayerColors(sharedBorders, layerBorders);\n\n    Settings.setDocumentSettingForKey(document, 'color-path-dictionary', colorPathDictionary);\n    Settings.setDocumentSettingForKey(document, 'shared-fills', sharedFills);\n    Settings.setDocumentSettingForKey(document, 'shared-borders', sharedBorders);\n    Settings.setDocumentSettingForKey(document, 'layer-fills', layerFills);\n    Settings.setDocumentSettingForKey(document, 'layer-borders', layerBorders);\n\n    buildPaletteBoard(document, sharedFills, layerFills, sharedBorders, layerBorders);\n\n    message('Color Pallete Document Created');\n}\n","export default function arrayMatches(arr1 = [], arr2 = [], strict = false) {\n    const newItems = arr2.filter((item) => !arr1.includes(item));\n\n    if (arr1.length !== arr2.length || newItems.length) {\n        return {\n            matches: false,\n            newItems,\n        };\n    }\n\n    let matches = true;\n    arr1.forEach((item, index) => {\n        if ((strict && item !== arr2[index]) || !arr2.includes(item)) {\n            matches = false;\n        }\n    });\n\n    return { matches, newItems };\n}\n","export const PALETTE_NAME = 'Document Color Palette (DO NOT CHANGE)';\n\nexport const BASE_CELL_HEIGHT = 95;\n","module.exports = require(\"sketch\");"],"sourceRoot":""}